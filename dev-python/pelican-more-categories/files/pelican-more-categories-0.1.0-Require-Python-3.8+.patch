diff --git a/pyproject.toml b/pyproject.toml
index d89215a..f275745 100644
--- a/pyproject.toml
+++ b/pyproject.toml
@@ -36,7 +36,7 @@ classifiers = [
 "Tracker" = "https://github.com/pelican-plugins/more-categories/issues"
 
 [tool.poetry.dependencies]
-python = "^3.6"
+python = ">=3.8.1,<4.0"
 pelican = "^4.2"
 markdown = {version = "^3.1.1",optional = true}
 
diff --git a/pyproject.toml b/pyproject.toml
index f275745..07b86f0 100644
--- a/pyproject.toml
+++ b/pyproject.toml
@@ -37,19 +37,19 @@ classifiers = [
 
 [tool.poetry.dependencies]
 python = ">=3.8.1,<4.0"
-pelican = "^4.2"
+pelican = "^4.5"
 markdown = {version = "^3.1.1",optional = true}
 
 [tool.poetry.dev-dependencies]
-flake8 = "^3.7"
-invoke = "^1.3"
-isort = "^4.3"
+flake8 = "^3.9"
+invoke = "^2.0"
+isort = "^5.12.0"
 livereload = "^2.6"
 markdown = "^3.1.1"
-pytest = ">=5.0,!=5.4.0,!=5.4.1"
-pytest-cov = "^2.7"
+pytest = "^6.0"
+pytest-cov = "^2.8"
 pytest-pythonpath = "^0.7.3"
-pytest-sugar = "^0.9.2"
+pytest-sugar = "^0.9.6"
 Werkzeug = "^0.15.5"
 
 [tool.poetry.extras]
diff --git a/pelican/plugins/more_categories/more_categories.py b/pelican/plugins/more_categories/more_categories.py
index 9219362..7719e78 100644
--- a/pelican/plugins/more_categories/more_categories.py
+++ b/pelican/plugins/more_categories/more_categories.py
@@ -1,4 +1,3 @@
-# -*- coding: utf-8 -*-
 """
 Title: more-categories
 Description: adds support for multiple categories per article and nested
@@ -54,13 +53,13 @@ def ancestors(self):
         return [self]
 
     def as_dict(self):
-        d = super(Category, self).as_dict()
+        d = super().as_dict()
         d['shortname'] = self.shortname
         return d
 
 
 def get_categories(generator, metadata):
-    categories = text_type(metadata.get('category')).split(',')
+    categories = str(metadata.get('category')).split(',')
     metadata['categories'] = [Category(name, generator.settings) for name in categories]
     metadata['category'] = metadata['categories'][0]
 
diff --git a/pelican/plugins/more_categories/more_categories.py b/pelican/plugins/more_categories/more_categories.py
index 7719e78..181c23c 100644
--- a/pelican/plugins/more_categories/more_categories.py
+++ b/pelican/plugins/more_categories/more_categories.py
@@ -7,24 +7,23 @@
 
 from collections import defaultdict
 
-from six import text_type
-
-from pelican import signals
 from pelican.urlwrappers import URLWrapper
 from pelican.utils import slugify
 
+from pelican import signals
+
 
 class Category(URLWrapper):
     @property
     def _name(self):
         if self.parent:
-            return self.parent._name + '/' + self.shortname
+            return self.parent._name + "/" + self.shortname
         return self.shortname
 
     @_name.setter
     def _name(self, val):
-        if '/' in val:
-            parentname, val = val.rsplit('/', 1)
+        if "/" in val:
+            parentname, val = val.rsplit("/", 1)
             self.parent = self.__class__(parentname, self.settings)
         else:
             self.parent = None
@@ -37,13 +36,13 @@ def name(self, val):
     @property
     def slug(self):
         if self._slug is None:
-            if 'CATEGORY_REGEX_SUBSTITUTIONS' in self.settings:
-                subs = self.settings['CATEGORY_REGEX_SUBSTITUTIONS']
+            if "CATEGORY_REGEX_SUBSTITUTIONS" in self.settings:
+                subs = self.settings["CATEGORY_REGEX_SUBSTITUTIONS"]
             else:
-                subs = self.settings.get('SLUG_REGEX_SUBSTITUTIONS', [])
+                subs = self.settings.get("SLUG_REGEX_SUBSTITUTIONS", [])
             self._slug = slugify(self.shortname, regex_subs=subs)
             if self.parent:
-                self._slug = self.parent.slug + '/' + self._slug
+                self._slug = self.parent.slug + "/" + self._slug
         return self._slug
 
     @property
@@ -54,14 +53,14 @@ def ancestors(self):
 
     def as_dict(self):
         d = super().as_dict()
-        d['shortname'] = self.shortname
+        d["shortname"] = self.shortname
         return d
 
 
 def get_categories(generator, metadata):
-    categories = str(metadata.get('category')).split(',')
-    metadata['categories'] = [Category(name, generator.settings) for name in categories]
-    metadata['category'] = metadata['categories'][0]
+    categories = str(metadata.get("category")).split(",")
+    metadata["categories"] = [Category(name, generator.settings) for name in categories]
+    metadata["category"] = metadata["categories"][0]
 
 
 def create_categories(generator):
@@ -73,9 +72,9 @@ def create_categories(generator):
 
     generator.categories = sorted(
         list(cat_dct.items()),
-        reverse=generator.settings.get('REVERSE_CATEGORY_ORDER') or False,
+        reverse=generator.settings.get("REVERSE_CATEGORY_ORDER") or False,
     )
-    generator._update_context(['categories'])
+    generator._update_context(["categories"])
 
     # Add descendents and children
     descendents = defaultdict(list)
diff --git a/pelican/plugins/more_categories/test_more_categories.py b/pelican/plugins/more_categories/test_more_categories.py
index f43a1ad..4a77344 100644
--- a/pelican/plugins/more_categories/test_more_categories.py
+++ b/pelican/plugins/more_categories/test_more_categories.py
@@ -14,21 +14,21 @@
 class TestArticlesGenerator(unittest.TestCase):
     @classmethod
     def setUpClass(cls):
-        cls.temp_path = mkdtemp(prefix='pelicantests.')
+        cls.temp_path = mkdtemp(prefix="pelicantests.")
         more_categories.register()
         settings = get_settings()
-        settings['DEFAULT_CATEGORY'] = 'default'
-        settings['CACHE_CONTENT'] = False
-        settings['PLUGINS'] = more_categories
+        settings["DEFAULT_CATEGORY"] = "default"
+        settings["CACHE_CONTENT"] = False
+        settings["PLUGINS"] = more_categories
         context = get_context(settings)
 
         base_path = os.path.dirname(os.path.abspath(__file__))
-        test_data_path = os.path.join(base_path, 'test_data')
+        test_data_path = os.path.join(base_path, "test_data")
         cls.generator = ArticlesGenerator(
             context=context,
             settings=settings,
             path=test_data_path,
-            theme=settings['THEME'],
+            theme=settings["THEME"],
             output_path=cls.temp_path,
         )
         cls.generator.generate_context()
@@ -42,34 +42,38 @@ def test_generate_categories(self):
         """Test whether multiple categories are generated correctly,
         including ancestor categories"""
 
-        cats_expected = ['default', 'foo', 'foo/bar', 'foo/b#az', 'foo/b#az/quux']
+        cats_expected = ["default", "foo", "foo/bar", "foo/b#az", "foo/b#az/quux"]
         self.assertEqual(sorted(list(self.cats.keys())), sorted(cats_expected))
 
     def test_extended_family(self):
         """Test whether categories correctly include their extended family"""
 
+        self.assertEqual(self.cats["foo/b#az/quux"].parent, self.cats["foo/b#az"])
         self.assertEqual(
-            self.cats['foo/b#az/quux'].parent,
-            self.cats['foo/b#az']
+            self.cats["foo/b#az/quux"].ancestors,
+            [
+                self.cats["foo"],
+                self.cats["foo/b#az"],
+                self.cats["foo/b#az/quux"],
+            ],
         )
         self.assertEqual(
-            self.cats['foo/b#az/quux'].ancestors,
-            [self.cats['foo'], self.cats['foo/b#az'], self.cats['foo/b#az/quux'], ]
+            self.cats["foo"].children, [self.cats["foo/bar"], self.cats["foo/b#az"]]
         )
         self.assertEqual(
-            self.cats['foo'].children,
-            [self.cats['foo/bar'], self.cats['foo/b#az']]
-        )
-        self.assertEqual(
-            self.cats['foo'].descendents,
-            [self.cats['foo/bar'], self.cats['foo/b#az'], self.cats['foo/b#az/quux'], ]
+            self.cats["foo"].descendents,
+            [
+                self.cats["foo/bar"],
+                self.cats["foo/b#az"],
+                self.cats["foo/b#az/quux"],
+            ],
         )
 
     def test_categories_slug(self):
         """Test whether category slug substitutions are used"""
 
         slugs_generated = [cat.slug for cat in self.cats.values()]
-        slugs_expected = ['default', 'foo', 'foo/bar', 'foo/baz', 'foo/baz/quux']
+        slugs_expected = ["default", "foo", "foo/bar", "foo/baz", "foo/baz/quux"]
         self.assertEqual(sorted(slugs_generated), sorted(slugs_expected))
 
     def test_assign_articles_to_categories(self):
diff --git a/pyproject.toml b/pyproject.toml
index 07b86f0..8062ed1 100644
--- a/pyproject.toml
+++ b/pyproject.toml
@@ -7,6 +7,7 @@ license = "AGPL-3.0"
 readme = "README.md"
 keywords = ["pelican", "plugin"]
 repository = "https://github.com/pelican-plugins/more-categories"
+documentation = "https://docs.getpelican.com"
 packages = [
     { include = "pelican" },
 ]
@@ -17,49 +18,45 @@ classifiers = [
     "Framework :: Pelican",
     "Framework :: Pelican :: Plugins",
     "Intended Audience :: End Users/Desktop",
-    "License :: OSI Approved :: GNU Affero General Public License v3",
     "Operating System :: OS Independent",
-    "Programming Language :: Python",
-    "Programming Language :: Python :: 3",
-    "Programming Language :: Python :: 3.6",
-    "Programming Language :: Python :: 3.7",
-    "Programming Language :: Python :: 3.8",
-    "Programming Language :: Python :: 3.9",
     "Topic :: Internet :: WWW/HTTP",
     "Topic :: Software Development :: Libraries :: Python Modules",
 ]
 
 [tool.poetry.urls]
-"Documentation" = "https://docs.getpelican.com/"
 "Funding" = "https://donate.getpelican.com/"
-"Source" = "https://github.com/pelican-plugins/more-categories"
 "Tracker" = "https://github.com/pelican-plugins/more-categories/issues"
 
 [tool.poetry.dependencies]
 python = ">=3.8.1,<4.0"
-pelican = "^4.5"
-markdown = {version = "^3.1.1",optional = true}
+pelican = ">=4.5"
+markdown = {version = ">=3.2",optional = true}
 
 [tool.poetry.dev-dependencies]
+black = "^23"
 flake8 = "^3.9"
 invoke = "^2.0"
 isort = "^5.12.0"
-livereload = "^2.6"
-markdown = "^3.1.1"
+markdown = "^3.2"
 pytest = "^6.0"
 pytest-cov = "^2.8"
 pytest-pythonpath = "^0.7.3"
 pytest-sugar = "^0.9.6"
-Werkzeug = "^0.15.5"
 
 [tool.poetry.extras]
 markdown = ["markdown"]
 
 [tool.autopub]
-project-name = "more-categories"
+project-name = "More Categories"
 git-username = "botpub"
 git-email = "botpub@autopub.rocks"
 
+[tool.isort]
+profile = "black"
+
+# Sort imports within their section independent of the import type
+force_sort_within_sections = true
+
 [build-system]
-requires = ["poetry>=1.0"]
-build-backend = "poetry.masonry.api"
+requires = ["poetry-core>=1.0.0"]
+build-backend = "poetry.core.masonry.api"
