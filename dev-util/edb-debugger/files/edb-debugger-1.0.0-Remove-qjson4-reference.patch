From 9b5c2c89e83c65d69152b46b04b773c6ae075831 Mon Sep 17 00:00:00 2001
From: Evan Teran <evan.teran@gmail.com>
Date: Fri, 4 May 2018 19:40:04 -0400
Subject: [PATCH] no longer need to use my qjson4 project now that we only
 support Qt5!

---
 .gitmodules                    |  3 ---
 CMakeLists.txt                 |  2 +-
 src/CMakeLists.txt             | 16 ----------------
 src/Debugger.cpp               |  6 +++---
 src/qjson4                     |  1 -
 src/session/SessionManager.cpp |  6 +++---
 6 files changed, 7 insertions(+), 27 deletions(-)
 delete mode 160000 src/qjson4

diff --git a/.gitmodules b/.gitmodules
index 775133e4..476f2ec9 100644
--- a/.gitmodules
+++ b/.gitmodules
@@ -1,6 +1,3 @@
 [submodule "src/qhexview"]
 	path = src/qhexview
 	url = https://github.com/eteran/qhexview.git
-[submodule "src/qjson4"]
-	path = src/qjson4
-	url = https://github.com/eteran/qjson4.git
diff --git a/CMakeLists.txt b/CMakeLists.txt
index 6ddcce7a..6cac906e 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -1,7 +1,7 @@
 cmake_minimum_required (VERSION 2.8)
 project (edb CXX)
 
-if(NOT EXISTS "${PROJECT_SOURCE_DIR}/src/qjson4/" OR NOT EXISTS "${PROJECT_SOURCE_DIR}/src/qhexview/")
+if(NOT EXISTS "${PROJECT_SOURCE_DIR}/src/qhexview/")
 	message(SEND_ERROR "The git submodules are not available. Please run:\ngit submodule update --init --recursive"
 )
 endif()
diff --git a/src/CMakeLists.txt b/src/CMakeLists.txt
index a31b766e..7ed14ffd 100644
--- a/src/CMakeLists.txt
+++ b/src/CMakeLists.txt
@@ -45,7 +45,6 @@ include_directories(
 	"capstone-edb"
 	"qhexview"
 	"widgets"
-	"qjson4"
 	"session"
 )
 
@@ -98,13 +97,6 @@ set(edb_SRCS
 	widgets/RegisterViewDelegate.cpp
 	widgets/SyntaxHighlighter.cpp
 	widgets/TabWidget.cpp
-	qjson4/QJsonArray.cpp
-	qjson4/QJsonDocument.cpp
-	qjson4/QJsonObject.cpp
-	qjson4/QJsonParseError.cpp
-	qjson4/QJsonParser.cpp
-	qjson4/QJsonValue.cpp
-	qjson4/QJsonValueRef.cpp
 	${RC_SRCS}
 	${UI_H}
 )
@@ -151,14 +143,6 @@ set(edb_INCLUDES
 	${PROJECT_SOURCE_DIR}/include/QULongValidator.h
 	${PROJECT_SOURCE_DIR}/include/HexStringValidator.h
 	${PROJECT_SOURCE_DIR}/include/Instruction.h
-	qjson4/QJsonArray.h
-	qjson4/QJsonDocument.h
-	qjson4/QJsonObject.h
-	qjson4/QJsonParseError.h
-	qjson4/QJsonParser.h
-	qjson4/QJsonRoot.h
-	qjson4/QJsonValue.h
-	qjson4/QJsonValueRef.h
 )
 
 if((${CMAKE_SYSTEM_PROCESSOR} MATCHES "i[3456]86") OR (${CMAKE_SYSTEM_PROCESSOR} STREQUAL "x86_64") OR (${CMAKE_SYSTEM_PROCESSOR} STREQUAL "AMD64"))
diff --git a/src/Debugger.cpp b/src/Debugger.cpp
index 915837e2..2c99f23c 100644
--- a/src/Debugger.cpp
+++ b/src/Debugger.cpp
@@ -41,9 +41,6 @@ along with this program.  If not, see <http://www.gnu.org/licenses/>.
 #include "Instruction.h"
 #include "MemoryRegions.h"
 #include "QHexView"
-#include "QJsonDocument.h"
-#include "QJsonObject.h"
-#include "QJsonParseError.h"
 #include "RecentFileManager.h"
 #include "RegionBuffer.h"
 #include "RegisterViewModelBase.h"
@@ -80,6 +77,9 @@ along with this program.  If not, see <http://www.gnu.org/licenses/>.
 #include <QUrl>
 #include <QVector>
 #include <QtDebug>
+#include <QJsonDocument>
+#include <QJsonObject>
+#include <QJsonParseError>
 
 #include <memory>
 #include <cstring>
diff --git a/src/session/SessionManager.cpp b/src/session/SessionManager.cpp
index acf8d6b4..0ad7025e 100644
--- a/src/session/SessionManager.cpp
+++ b/src/session/SessionManager.cpp
@@ -18,15 +18,15 @@ along with this program.  If not, see <http://www.gnu.org/licenses/>.
 
 #include "SessionManager.h"
 #include "IPlugin.h"
-#include "QJsonDocument.h"
-#include "QJsonObject.h"
-#include "QJsonParseError.h"
 #include "edb.h"
 
 #include <QDateTime>
 #include <QDebug>
 #include <QFile>
 #include <QMessageBox>
+#include <QJsonDocument>
+#include <QJsonObject>
+#include <QJsonParseError>
 
 const int  SessionFileVersion  = 1;
 const auto SessionFileIdString = QLatin1String("edb-session");
